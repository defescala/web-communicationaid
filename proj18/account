from flask import Flask
from flask_sqlalchemy import SQLAlchemy
from flask import render_template, request, url_for
from proj18 import Parent, db

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'postgresql://postgres:regards@localhost/db'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = True
db = SQLAlchemy(app)

@app.route('/')
def mode():
    return render_template('mode.html')
@app.route('/parent', methods=['GET'])
def parent():
    myParent = Parent.query.all()
    return render_template('p_prof.html', myParent=myParent)

@app.route('/edit_parent', methods=['GET','POST'])
def edit_parent():
    if request.method == "POST":
        parent = Parent(request.form['fname_p'], request.form['lname_p'], request.form['bday_p'], request.form['add_p'])
        db.session.add(parent)
        db.session.commit()
        print "hello"
        return render_template('p_prof.html')
    if request.method == "GET":
        return render_template('edit_p.html')

# @app.route('/edit_parent', method=['POST'])
# def edit_parent():


if __name__ == "__main__":
    app.run(debug=True)